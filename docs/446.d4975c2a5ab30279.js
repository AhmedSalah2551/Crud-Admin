"use strict";(self.webpackChunkadmin=self.webpackChunkadmin||[]).push([[446],{446:(X,f,o)=>{o.r(f),o.d(f,{HttpLoaderFactory:()=>T,ManageUsersModule:()=>E});var g=o(6895),h=o(4333),v=o(2796),m=o(4006),x=o(529),_=o(9299),t=o(4650),Z=o(1433),M=o(4383),b=o(8423),p=o(3081),k=o(4859),C=o(9549),y=o(4144),l=o(671),U=o(502);function S(e,s){1&e&&(t.TgZ(0,"th",21),t._uU(1," No. "),t.qZA())}function A(e,s){if(1&e&&(t.TgZ(0,"td",22),t._uU(1),t.qZA()),2&e){const n=s.index;t.xp6(1),t.hij(" ",n+1," ")}}function D(e,s){1&e&&(t.TgZ(0,"th",21),t._uU(1," Name "),t.qZA())}function N(e,s){if(1&e&&(t.TgZ(0,"td",22),t._uU(1),t.qZA()),2&e){const n=s.$implicit;t.xp6(1),t.hij(" ",n.username," ")}}function w(e,s){1&e&&(t.TgZ(0,"th",21),t._uU(1," Email "),t.qZA())}function J(e,s){if(1&e&&(t.TgZ(0,"td",22),t._uU(1),t.qZA()),2&e){const n=s.$implicit;t.xp6(1),t.hij(" ",n.email," ")}}function Y(e,s){1&e&&(t.TgZ(0,"th",21),t._uU(1," Tasks Assigned "),t.qZA())}function B(e,s){if(1&e&&(t.TgZ(0,"td",22),t._uU(1),t.qZA()),2&e){const n=s.$implicit;t.xp6(1),t.hij(" ",n.assignedTasks," ")}}function Q(e,s){1&e&&t._UZ(0,"th",23)}function O(e,s){if(1&e){const n=t.EpF();t.TgZ(0,"button",28),t.NdJ("click",function(){t.CHM(n);const r=t.oxw(),i=r.$implicit,c=r.index,u=t.oxw();return t.KtG(u.changeStatus(i.status,i._id,c))}),t._uU(1,"Activate"),t.qZA()}}function P(e,s){if(1&e){const n=t.EpF();t.TgZ(0,"button",29),t.NdJ("click",function(){t.CHM(n);const r=t.oxw(),i=r.$implicit,c=r.index,u=t.oxw();return t.KtG(u.changeStatus(i.status,i._id,c))}),t._uU(1,"Deactivate"),t.qZA()}}function F(e,s){if(1&e){const n=t.EpF();t.TgZ(0,"td",24)(1,"button",25),t.NdJ("click",function(){const r=t.CHM(n),i=r.$implicit,c=r.index,u=t.oxw();return t.KtG(u.deleteUser(i._id,c))}),t._uU(2,"Delete"),t.qZA(),t.YNc(3,O,2,0,"button",26),t.YNc(4,P,2,0,"button",27),t.qZA()}if(2&e){const n=s.$implicit;t.xp6(3),t.Q6J("ngIf","Active"!==n.status),t.xp6(1),t.Q6J("ngIf","Active"==n.status)}}function I(e,s){1&e&&t._UZ(0,"tr",30)}function j(e,s){1&e&&t._UZ(0,"tr",31)}const d=function(){return{height:"40px"}};function H(e,s){1&e&&(t.TgZ(0,"div",32),t._UZ(1,"ngx-skeleton-loader",33)(2,"ngx-skeleton-loader",33)(3,"ngx-skeleton-loader",33)(4,"ngx-skeleton-loader",33)(5,"ngx-skeleton-loader",33),t.qZA()),2&e&&(t.xp6(1),t.Q6J("theme",t.DdM(5,d)),t.xp6(1),t.Q6J("theme",t.DdM(6,d)),t.xp6(1),t.Q6J("theme",t.DdM(7,d)),t.xp6(1),t.Q6J("theme",t.DdM(8,d)),t.xp6(1),t.Q6J("theme",t.DdM(9,d)))}const R=function(e){return{darkTable:e}},$=function(e,s){return{id:"tasks",itemsPerPage:8,currentPage:e,totalItems:s}},K=[{path:"",component:(()=>{class e{constructor(n,a,r,i){this.services=n,this.toaster=a,this.spinner=r,this.translate=i,this.displayedColumns=["position","name","email","tasksAssigned","actions"],this.loading=!1,this.page=1,this.filteration={limit:8,page:this.page},this.theme=!1,this.getDataFromSubject(),this.language=localStorage.getItem("language"),"language"in localStorage&&i.use(this.language)}ngOnInit(){const n=localStorage.getItem("darkMode");n&&(this.theme=JSON.parse(n)),this.loading=!1,this.getUser()}getUser(){this.loading=!1,this.dataSource=[],this.services.getAllUsers(this.filteration)}getDataFromSubject(){this.loading=!1,this.dataSource=[],this.services.userData.subscribe(n=>{this.dataSource=n.data,this.totalItems=n.total,this.loading=n.loading})}filter(n){this.page=1,this.filteration.page=1,this.filteration.name=n.value,this.timeOut=setTimeout(()=>{this.getUser()},2e3)}deleteUser(n,a){this.spinner.show(),this.dataSource[a].assignedTasks>0?(this.toaster.error("you can't delete this user","user has tasks"),this.spinner.hide()):this.services.deleteUsers(n).subscribe(r=>{this.toaster.success("User Deleted Successfuly","Success"),this.getUser(),this.spinner.hide()})}changeStatus(n,a,r){this.spinner.show();const i={id:a,status:n};this.dataSource[r].assignedTasks>0?(this.toaster.error("you can't delete this user","user has tasks"),this.spinner.hide()):this.services.changeStatus(i).subscribe(c=>{this.getUser(),this.spinner.hide(),this.toaster.success("User Status Changed Successfuly","Success")})}pageChange(n){this.dataSource=[],this.page=n,this.filteration.page=n,this.getUser()}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(Z.f),t.Y36(M._W),t.Y36(b.t2),t.Y36(p.sK))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-users"]],decls:31,vars:13,consts:[[1,"mt-4"],[1,"row","mt-3"],[1,"col-md-3"],["appearance","outline",1,"w-100"],["matInput","","placeholder","title search",3,"keyup"],[1,"listBox"],["mat-table","",1,"mat-elevation-z8","w-100","mt-2",3,"dataSource","ngClass"],["matColumnDef","position"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","name"],["matColumnDef","email"],["matColumnDef","tasksAssigned"],["matColumnDef","actions"],["mat-header-cell","","class","w-20",4,"matHeaderCellDef"],["mat-cell","","class","d-flex",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","item mt-4",4,"ngIf"],[1,"d-flex","justify-content-center","mt-2"],["id","tasks",1,"my-pagination",3,"pageChange"],["mat-header-cell",""],["mat-cell",""],["mat-header-cell","",1,"w-20"],["mat-cell","",1,"d-flex"],["mat-raised-button","","color","warn",3,"click"],["class","ml-2","color","accent","mat-raised-button","",3,"click",4,"ngIf"],["class","ml-2","color","primary","mat-raised-button","",3,"click",4,"ngIf"],["color","accent","mat-raised-button","",1,"ml-2",3,"click"],["color","primary","mat-raised-button","",1,"ml-2",3,"click"],["mat-header-row",""],["mat-row",""],[1,"item","mt-4"],[3,"theme"]],template:function(n,a){1&n&&(t.TgZ(0,"div",0)(1,"form")(2,"div",1)(3,"div",2)(4,"mat-form-field",3)(5,"mat-label"),t._uU(6,"Search"),t.qZA(),t.TgZ(7,"input",4),t.NdJ("keyup",function(i){return a.filter(i.target)}),t.qZA()()()()(),t.TgZ(8,"div",5)(9,"table",6),t.ynx(10,7),t.YNc(11,S,2,0,"th",8),t.YNc(12,A,2,1,"td",9),t.BQk(),t.ynx(13,10),t.YNc(14,D,2,0,"th",8),t.YNc(15,N,2,1,"td",9),t.BQk(),t.ynx(16,11),t.YNc(17,w,2,0,"th",8),t.YNc(18,J,2,1,"td",9),t.BQk(),t.ynx(19,12),t.YNc(20,Y,2,0,"th",8),t.YNc(21,B,2,1,"td",9),t.BQk(),t.ynx(22,13),t.YNc(23,Q,1,0,"th",14),t.YNc(24,F,5,2,"td",15),t.BQk(),t.YNc(25,I,1,0,"tr",16),t.YNc(26,j,1,0,"tr",17),t.ALo(27,"paginate"),t.qZA(),t.YNc(28,H,6,10,"div",18),t.TgZ(29,"div",19)(30,"pagination-controls",20),t.NdJ("pageChange",function(i){return a.pageChange(i)}),t.qZA()()()()),2&n&&(t.xp6(9),t.Q6J("dataSource",a.dataSource)("ngClass",t.VKq(8,R,a.theme)),t.xp6(16),t.Q6J("matHeaderRowDef",a.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",t.xi3(27,5,a.displayedColumns,t.WLB(10,$,a.page,a.totalItems))),t.xp6(2),t.Q6J("ngIf",0==a.loading))},dependencies:[h.LS,k.lW,C.KE,C.hX,y.Nt,l.BZ,l.fO,l.as,l.w1,l.Dz,l.nj,l.ge,l.ev,l.XQ,l.Gk,m._Y,m.JL,m.F,g.mk,g.O5,U.xr,h._s],styles:[".listBox[_ngcontent-%COMP%]{scroll-behavior:smooth;overflow-x:auto!important}.listBox[_ngcontent-%COMP%]::-webkit-scrollbar{height:6px}.listBox[_ngcontent-%COMP%]::-webkit-scrollbar-track{background-color:transparent}.listBox[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background-color:#bc1059;border-radius:10px}.listBox[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{min-width:1000px!important}[_nghost-%COMP%]     table{min-width:1000px}[_nghost-%COMP%]     table thead{background-color:#bc1059!important}[_nghost-%COMP%]     table thead .mat-header-cell{color:#fff}.w-20[_ngcontent-%COMP%]{width:20%!important}.my-pagination[_ngcontent-%COMP%]     .ngx-pagination .current{background:#ca085a!important}"]}),e})()}];let L=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[_.Bz.forChild(K),_.Bz]}),e})();var z=o(9832);let E=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[h.JX,v.q,m.u5,m.UX,L,x.JF,g.ez,U.hx,p.aw.forRoot({loader:{provide:p.Zw,useFactory:T,deps:[x.eN]}})]}),e})();function T(e){return new z.w(e,"../assets/i18n/",".json")}}}]);